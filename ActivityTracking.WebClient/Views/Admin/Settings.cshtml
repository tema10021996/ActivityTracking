@model ActivityTracking.WebClient.Models.AdminSettingsViewModel
@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";

}

<div class="panel panel-default">
    <div class="panel-heading text-center">
        <div class="text-right">
            @using (Html.BeginForm("FindUserReport", "Admin"))
            {
                <div class="input-group">
                    @Html.Hidden("returnUrl", Request.Url.PathAndQuery)
                    @Html.TextBox("userName", null, new { @class = "form-control", placeholder = "Search user by login", style = "width:200px" })
                    <div class="input-group-btn">
                        <button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
                    </div>
                </div>
            }
        </div>
        <h4><b>Reason settings</b></h4>
    </div>
    <div class="panel-body">        
        <table class="table table-striped table-condensed table-bordered">
            <tr>
                <th class="text-center">Reason</th>
                <th class="text-center">Reason color</th>
                <th class="text-center">Delete reason</th>
                <th class="text-center">Change reason</th>
            </tr>
            @foreach (var reason in Model.AllReasons)
            {
                <tr>
                    <td class="text-left">@reason.Name</td>
                    <td class="text-center"><label style="background-color:@reason.Color; width:25px; height: 25px"></label></td>
                    <td class="text-center">                          
                        <input type="submit" class="btn btn-primary btn-sm" value="Delete reason" data-toggle="modal" data-target="#@reason.Id" />
                        <div id="@reason.Id" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                                <div class="modal-content">                                
                                    @using (Html.BeginForm("DeleteReason", "Admin"))
                                    {           
                                        @Html.Hidden("Id", reason.Id)
                                        <div class="modal-header text-center">
                                            <button type="button" class="close" data-dismiss="modal">&times;</button> 
                                            <h3>Are you sure? </h3>
                                            <br>
                                            <br>
                                            <div class="text-right">

                                                <input type="submit" class="btn btn-danger btn-sm" value="Delete" />
                                                <button type="button" class="btn btn-primary btn-sm" data-dismiss="modal">Close</button>

                                            </div>
                                        </div>
                                       
                                    }
                                </div>

                            </div>
                        </div>
                    </td>                      
                    <td class="text-center">
                        <input type="submit" class="btn btn-primary btn-sm" value="Change reason" data-toggle="modal" data-target="#@reason.Id@reason.Name" />
                        <div id="@reason.Id@reason.Name" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    @using (Html.BeginForm("ChangeReason", "Admin"))
                                    {
                                        @Html.Hidden("Id", reason.Id)
                                        <div class="modal-header text-center">
                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            <b>Changing reason:</b>
                                        </div>
                                        <div class="modal-body text-left">
                                            <b>Reason name: </b>
                                            @Html.TextBox("reasonNewName", reason.Name)
                                            <br>
                                            <br>
                                            @Html.Label("Change color: ")
                                            <input type="color" name="reasonNewColor" id="reasonNewColor" style="padding:0;" value="@reason.Color" />
                                        </div>
                                        <div class="modal-footer">
                                            <input type="submit" class="btn btn-danger btn-sm" value="Save" />
                                            <button type="button" class="btn btn-primary btn-sm" data-dismiss="modal">Close</button>
                                        </div>

                                    }
                                </div>

                            </div>
                        </div>
                    </td>                                  
                </tr>


            }
        </table>

        <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#addReason">Add new reason</button>
        <div id="addReason" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    @using (Html.BeginForm("AddReason", "Admin"))
                    {
                        <div class="modal-header text-center">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <b class="text-center">Adding new reason</b>
                        </div>
                        <div class="modal-body text-left">                           
                            <b>Reason name: </b>
                            @Html.TextBox("reasonName")
                            <br>
                            <br>
                            @Html.Label("Choose color: ")
                            <input type="color" name="reasonColor" id="reasonColor" style="padding:0"/>
                        </div>
                        <div class="modal-footer">

                            <input type="submit" class="btn btn-danger btn-sm" value="Add" />
                            <button type="button" class="btn btn-primary btn-sm" data-dismiss="modal">Close</button>

                        </div>
                    }
                </div>

            </div>
        </div>

       


    </div>
</div>

